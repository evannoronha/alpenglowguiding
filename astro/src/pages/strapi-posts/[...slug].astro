---
import MarkdownPostLayout from "../../layouts/MarkdownBlogPostLayout.astro";
import DynamicZoneRenderer from "../../components/DynamicZoneRenderer";
import { getPostBySlug } from "../../lib/strapi";

const { slug } = Astro.params;
console.log(slug);

const post = await getPostBySlug(slug as string);

if (!post) {
  return Astro.redirect("/404");
}

console.log('Post body:', JSON.stringify(post.body, null, 2));
---

<MarkdownPostLayout frontmatter={post}>
  <DynamicZoneRenderer content={post.body} client:load />
</MarkdownPostLayout>
