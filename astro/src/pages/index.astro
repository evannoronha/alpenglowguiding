---
import Programs from "../components/Programs.astro";
import AboutTom from "../components/AboutTom.astro";
import LandingHero from "../components/LandingHero.astro";
import Certifications from "../components/Certifications.astro";
import BaseLayout from "../layouts/BaseLayout.astro";
import RecentBlogPosts from "../components/RecentBlogPosts.astro";
import { getImage } from "astro:assets";
import heroImage from "../images/hero-image.jpg";

// Pre-render this page for optimal performance and image optimization
export const prerender = true;

// Generate optimized hero image for preload
const optimizedHeroImage = await getImage({ src: heroImage, width: 1024, format: 'webp' });

const sections = [
	LandingHero,
	Programs,
	AboutTom,
	Certifications,
	RecentBlogPosts,
]

const description = "Alpenglow Guiding offers expert-led rock climbing adventures and technical skills training in and around Seattle, Washington."
---

<BaseLayout title="Home" description={description}>
	<link slot="head" rel="preload" as="image" href={optimizedHeroImage.src} fetchpriority="high" />
	{
		sections.map((Section) => (
			<>
				<Section />
				<div class="clear" />
			</>
		))
	}
</BaseLayout>
